<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Hours Tracker</title>
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- AUTH -->
  <section id="auth-section" class="auth-card" aria-live="polite">
    <div class="auth-brand">
      <h1>Hours Tracker</h1>
      <p class="subtitle">Sign in to continue</p>
    </div>
    <div class="auth-form">
      <input id="email" type="email" placeholder="Email" autocomplete="username">
      <input id="password" type="password" placeholder="Password" autocomplete="current-password">
      <div class="auth-actions">
        <button id="loginBtn" class="btn primary">Sign in</button>
        <button id="registerBtn" class="btn ghost">Create account</button>
      </div>
      <div class="auth-links">
        <button id="resetUserPasswordBtn" class="link-btn">Forgot password?</button>
      </div>
      <div id="auth-message" class="auth-hint" aria-live="polite"></div>
    </div>
  </section>

  <!-- APP -->
  <div id="app" class="app" style="display:none">
    <header class="topbar">
      <div class="brand">
        <h1>Hours Tracker</h1>
        <p class="subtitle">Track hours — goal: 1800 hrs</p>
      </div>
      <div class="controls">
        <button id="prevMonthBtn" class="icon-btn" aria-label="Previous month">‹</button>
        <div id="month-year" class="month-year" aria-live="polite">Month Year</div>
        <button id="nextMonthBtn" class="icon-btn" aria-label="Next month">›</button>
        <button id="logoutBtn" class="btn small">Sign out</button>
      </div>
    </header>

    <main class="main">
      <section class="calendar-panel">
        <div id="calendar" class="calendar" role="grid" aria-label="Work hours calendar"></div>
      </section>

      <aside class="summary">
        <div class="summary-card">
          <h2>Summary</h2>
          <div class="summary-row">
            <span>Total hours</span><strong id="total-hours">0</strong>
          </div>
          <div class="summary-row">
            <span>Projected completion</span><strong id="completion-date">—</strong>
          </div>
          <button id="reset-btn" class="reset-btn">Clear entries</button>
        </div>

        <div id="admin-panel" class="summary-card" style="display:none; margin-top:12px;">
          <h3>Admin Dashboard</h3>
          <div class="admin-stat"><strong>Online users:</strong> <span id="admin-online-count">0</span></div>
          <div class="admin-stat"><strong>Total registered users:</strong> <span id="admin-total-count">0</span></div>
          <div style="margin-top:12px;">
            <strong>Users</strong>
            <ul id="admin-users-list" style="max-height:220px; overflow:auto; margin:8px 0 0 0; padding-left:18px;"></ul>
          </div>
          <div style="display:flex; gap:8px; margin-top:12px;">
            <button id="exportDataBtn" class="reset-btn">Export my data</button>
            <button id="refreshUsersBtn" class="btn ghost">Refresh</button>
          </div>
        </div>
      </aside>
    </main>

    <footer class="footer">
      <small>Started: Oct 1, 2025 • Goal: 1800 hrs</small>
    </footer>
  </div>

  <!-- Sync status + Modal -->
  <div id="sync-status" class="sync-status" aria-live="polite" style="display:none"></div>

  <div id="hoursModal" class="modal" aria-hidden="true" role="dialog" aria-modal="true" style="display:none">
    <div class="modal-backdrop" id="modalBackdrop"></div>
    <div class="modal-card" role="document" aria-labelledby="modalTitle">
      <h3 id="modalTitle">Enter hours</h3>
      <p id="modalDateLabel" class="muted small">Date</p>
      <input id="modalHoursInput" type="number" min="0" max="8" step="1" inputmode="numeric" />
      <div class="modal-actions">
        <button id="modalCancelBtn" class="btn ghost small">Cancel</button>
        <button id="modalSaveBtn" class="btn primary small">Save</button>
      </div>
    </div>
  </div>

  <script type="module" src="script.js"></script>
</body>
</html>
